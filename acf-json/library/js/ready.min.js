/*
 FastClick: polyfill to remove click delays on browsers with touch UIs.
 @version 1.0.3
 @codingstandard ftlabs-jsv2
 @copyright The Financial Times Limited [All Rights Reserved]
 @license MIT License (see LICENSE.txt)
*/
(function ($) { "use strict"; function e(t, r) { function s(e, t) { return function () { return e.apply(t, arguments) } } var i; r = r || {}; this.trackingClick = false; this.trackingClickStart = 0; this.targetElement = null; this.touchStartX = 0; this.touchStartY = 0; this.lastTouchIdentifier = 0; this.touchBoundary = r.touchBoundary || 10; this.layer = t; this.tapDelay = r.tapDelay || 200; this.tapTimeout = r.tapTimeout || 700; if (e.notNeeded(t)) { return } var o = ["onMouse", "onClick", "onTouchStart", "onTouchMove", "onTouchEnd", "onTouchCancel"]; var u = this; for (var a = 0, f = o.length; a < f; a++) { u[o[a]] = s(u[o[a]], u) } if (n) { t.addEventListener("mouseover", this.onMouse, true); t.addEventListener("mousedown", this.onMouse, true); t.addEventListener("mouseup", this.onMouse, true) } t.addEventListener("click", this.onClick, true); t.addEventListener("touchstart", this.onTouchStart, false); t.addEventListener("touchmove", this.onTouchMove, false); t.addEventListener("touchend", this.onTouchEnd, false); t.addEventListener("touchcancel", this.onTouchCancel, false); if (!Event.prototype.stopImmediatePropagation) { t.removeEventListener = function (e, n, r) { var i = Node.prototype.removeEventListener; if (e === "click") { i.call(t, e, n.hijacked || n, r) } else { i.call(t, e, n, r) } }; t.addEventListener = function (e, n, r) { var i = Node.prototype.addEventListener; if (e === "click") { i.call(t, e, n.hijacked || (n.hijacked = function (e) { if (!e.propagationStopped) { n(e) } }), r) } else { i.call(t, e, n, r) } } } if (typeof t.onclick === "function") { i = t.onclick; t.addEventListener("click", function (e) { i(e) }, false); t.onclick = null } } var t = navigator.userAgent.indexOf("Windows Phone") >= 0; var n = navigator.userAgent.indexOf("Android") > 0 && !t; var r = /iP(ad|hone|od)/.test(navigator.userAgent) && !t; var i = r && /OS 4_\d(_\d)?/.test(navigator.userAgent); var s = r && /OS ([6-9]|\d{2})_\d/.test(navigator.userAgent); var o = navigator.userAgent.indexOf("BB10") > 0; e.prototype.needsClick = function (e) { switch (e.nodeName.toLowerCase()) { case "button": case "select": case "textarea": if (e.disabled) { return true } break; case "input": if (r && e.type === "file" || e.disabled) { return true } break; case "label": case "iframe": case "video": return true }return /\bneedsclick\b/.test(e.className) }; e.prototype.needsFocus = function (e) { switch (e.nodeName.toLowerCase()) { case "textarea": return true; case "select": return !n; case "input": switch (e.type) { case "button": case "checkbox": case "file": case "image": case "radio": case "submit": return false }return !e.disabled && !e.readOnly; default: return /\bneedsfocus\b/.test(e.className) } }; e.prototype.sendClick = function (e, t) { var n, r; if (document.activeElement && document.activeElement !== e) { document.activeElement.blur() } r = t.changedTouches[0]; n = document.createEvent("MouseEvents"); n.initMouseEvent(this.determineEventType(e), true, true, window, 1, r.screenX, r.screenY, r.clientX, r.clientY, false, false, false, false, 0, null); n.forwardedTouchEvent = true; e.dispatchEvent(n) }; e.prototype.determineEventType = function (e) { if (n && e.tagName.toLowerCase() === "select") { return "mousedown" } return "click" }; e.prototype.focus = function (e) { var t; if (r && e.setSelectionRange && e.type.indexOf("date") !== 0 && e.type !== "time" && e.type !== "month") { t = e.value.length; e.setSelectionRange(t, t) } else { e.focus() } }; e.prototype.updateScrollParent = function (e) { var t, n; t = e.fastClickScrollParent; if (!t || !t.contains(e)) { n = e; do { if (n.scrollHeight > n.offsetHeight) { t = n; e.fastClickScrollParent = n; break } n = n.parentElement } while (n) } if (t) { t.fastClickLastScrollTop = t.scrollTop } }; e.prototype.getTargetElementFromEventTarget = function (e) { if (e.nodeType === Node.TEXT_NODE) { return e.parentNode } return e }; e.prototype.onTouchStart = function (e) { var t, n, s; if (e.targetTouches.length > 1) { return true } t = this.getTargetElementFromEventTarget(e.target); n = e.targetTouches[0]; if (r) { s = window.getSelection(); if (s.rangeCount && !s.isCollapsed) { return true } if (!i) { if (n.identifier && n.identifier === this.lastTouchIdentifier) { e.preventDefault(); return false } this.lastTouchIdentifier = n.identifier; this.updateScrollParent(t) } } this.trackingClick = true; this.trackingClickStart = e.timeStamp; this.targetElement = t; this.touchStartX = n.pageX; this.touchStartY = n.pageY; if (e.timeStamp - this.lastClickTime < this.tapDelay) { e.preventDefault() } return true }; e.prototype.touchHasMoved = function (e) { var t = e.changedTouches[0], n = this.touchBoundary; if (Math.abs(t.pageX - this.touchStartX) > n || Math.abs(t.pageY - this.touchStartY) > n) { return true } return false }; e.prototype.onTouchMove = function (e) { if (!this.trackingClick) { return true } if (this.targetElement !== this.getTargetElementFromEventTarget(e.target) || this.touchHasMoved(e)) { this.trackingClick = false; this.targetElement = null } return true }; e.prototype.findControl = function (e) { if (e.control !== undefined) { return e.control } if (e.htmlFor) { return document.getElementById(e.htmlFor) } return e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea") }; e.prototype.onTouchEnd = function (e) { var t, o, u, a, f, l = this.targetElement; if (!this.trackingClick) { return true } if (e.timeStamp - this.lastClickTime < this.tapDelay) { this.cancelNextClick = true; return true } if (e.timeStamp - this.trackingClickStart > this.tapTimeout) { return true } this.cancelNextClick = false; this.lastClickTime = e.timeStamp; o = this.trackingClickStart; this.trackingClick = false; this.trackingClickStart = 0; if (s) { f = e.changedTouches[0]; l = document.elementFromPoint(f.pageX - window.pageXOffset, f.pageY - window.pageYOffset) || l; l.fastClickScrollParent = this.targetElement.fastClickScrollParent } u = l.tagName.toLowerCase(); if (u === "label") { t = this.findControl(l); if (t) { this.focus(l); if (n) { return false } l = t } } else if (this.needsFocus(l)) { if (e.timeStamp - o > 100 || r && window.top !== window && u === "input") { this.targetElement = null; return false } this.focus(l); this.sendClick(l, e); if (!r || u !== "select") { this.targetElement = null; e.preventDefault() } return false } if (r && !i) { a = l.fastClickScrollParent; if (a && a.fastClickLastScrollTop !== a.scrollTop) { return true } } if (!this.needsClick(l)) { e.preventDefault(); this.sendClick(l, e) } return false }; e.prototype.onTouchCancel = function () { this.trackingClick = false; this.targetElement = null }; e.prototype.onMouse = function (e) { if (!this.targetElement) { return true } if (e.forwardedTouchEvent) { return true } if (!e.cancelable) { return true } if (!this.needsClick(this.targetElement) || this.cancelNextClick) { if (e.stopImmediatePropagation) { e.stopImmediatePropagation() } else { e.propagationStopped = true } e.stopPropagation(); e.preventDefault(); return false } return true }; e.prototype.onClick = function (e) { var t; if (this.trackingClick) { this.targetElement = null; this.trackingClick = false; return true } if (e.target.type === "submit" && e.detail === 0) { return true } t = this.onMouse(e); if (!t) { this.targetElement = null } return t }; e.prototype.destroy = function () { var e = this.layer; if (n) { e.removeEventListener("mouseover", this.onMouse, true); e.removeEventListener("mousedown", this.onMouse, true); e.removeEventListener("mouseup", this.onMouse, true) } e.removeEventListener("click", this.onClick, true); e.removeEventListener("touchstart", this.onTouchStart, false); e.removeEventListener("touchmove", this.onTouchMove, false); e.removeEventListener("touchend", this.onTouchEnd, false); e.removeEventListener("touchcancel", this.onTouchCancel, false) }; e.notNeeded = function (e) { var t; var r; var i; if (typeof window.ontouchstart === "undefined") { return true } r = +(/Chrome\/([0-9]+)/.exec(navigator.userAgent) || [, 0])[1]; if (r) { if (n) { t = document.querySelector("meta[name=viewport]"); if (t) { if (t.content.indexOf("user-scalable=no") !== -1) { return true } if (r > 31 && document.documentElement.scrollWidth <= window.outerWidth) { return true } } } else { return true } } if (o) { i = navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/); if (i[1] >= 10 && i[2] >= 3) { t = document.querySelector("meta[name=viewport]"); if (t) { if (t.content.indexOf("user-scalable=no") !== -1) { return true } if (document.documentElement.scrollWidth <= window.outerWidth) { return true } } } } if (e.style.msTouchAction === "none") { return true } if (e.style.touchAction === "none") { return true } return false }; e.attach = function (t, n) { return new e(t, n) }; if (typeof define == "function" && typeof define.amd == "object" && define.amd) { define(function () { return e }) } else if (typeof module !== "undefined" && module.exports) { module.exports = e.attach; module.exports.FastClick = e } else { window.FastClick = e } })(jQuery);
jQuery(function () {
	FastClick.attach(document.body);
});


console.log('%c Built with love by https://maverickdigital.nz ', 'background: #00F; color: #fff');
window.addEventListener('load', function () { console.log("loaded");jQuery('body').addClass('is-loaded'); });
jQuery(document).ready(function ($) {

	jQuery(".match").matchHeight({});
	$('.mailme').mailme();

	
	/*
	// init controller
	var controllerHeader = new ScrollMagic.Controller();
	// build tween
	var tween = TweenMax.to(".intro-copy", 1, { css: { transform: "translateY(-10vh)", opacity: "0" } });
	var scene = new ScrollMagic.Scene({ duration: '50%', offset: 0 }).setTween(tween)			//.addIndicators({name: ".intro-copy"}) // add indicators (requires plugin)		
	 .addTo(controllerHeader);



	var tween = TweenMax.to(".slides .bg-image", 1, { css: { transform: "translateY(-25vh)" } });
	var scene = new ScrollMagic.Scene({ duration: '100%',  offset: 0 }).setTween(tween)			//.addIndicators({name: ".intro-copy"}) // add indicators (requires plugin)		
	.addTo(controllerHeader);


	var tween = TweenMax.to(".slides .videocontainer", 1, { css: { transform: "translateY(-25vh" } });
	var scene = new ScrollMagic.Scene({ duration: '100%',  offset: 0 }).setTween(tween)			//.addIndicators({name: ".intro-copy"}) // add indicators (requires plugin)		
	.addTo(controllerHeader);

	var tween = TweenMax.to("#intro", 1, { css: { transform: "translateY(0vh)" } });
	var scene = new ScrollMagic.Scene({ duration: '100%', offset: 50 }).setTween(tween);			//.addIndicators({name: ".intro-copy"}) // add indicators (requires plugin)			
	//.addTo(controllerHeader);
	*/
	/*

	$('h1').each(function (i, elem) {
		$(this).attr('data-aos', "zoom-in"); $(this).attr('data-aos-anchor-placement', "top-bottom");
	});
	$('h2, h3, blockquote').each(function (i, elem) {
		$(this).attr('data-aos', "fade-up")
				.attr('data-aos-anchor-placement', "top-bottom");
		
		// console.log(i);$(this).attr('data-aos', "fade-up");$(this).attr('data-aos-anchor-placement', "top-bottom");
	});
	$('h4').each(function (i, elem) {
		$(this).attr('data-aos', "fade-up"); $(this).attr('data-aos-anchor-placement', "top-bottom");
	});
	$('footer .col').each(function (i, elem) {
		$(this).attr('data-aos-delay', i + "00"); $(this).attr('data-aos', "fade-up");
	});
	

	
	//  " data-aos="zoom-in-up" data-aos-anchor-placement="top-center" data-aos-duration="3000" data-aos-delay="100">
	$('.page_layout p,.teaser').each(function (i, elem) {
		$(this).attr('data-aos', "fade-up"); $(this).attr('data-aos-anchor-placement', "top-bottom");
	});
	$('.page_layout li').each(function (i, elem) {
	//	$(this).attr('data-aos', "fade-up"); $(this).attr('data-aos-anchor-placement', "top-bottom");
	});
	$('.page_layout li.item').each(function (i, elem) {
		$(this).removeAttr('data-aos');
	});
	
	$('a.button').each(function (i, elem) {
		$(this).attr('data-aos', "fade-up").attr('data-aos-anchor-placement', "top-bottom").attr('data-aos-delay', "0");
	});	
	$('.subfooter_image').attr('data-aos', "custom").attr('data-aos-delay', "300").attr('data-aos-anchor-placement', "center-bottom");
*/
	/*
	$('.text-on-right .col.textwrap').each(function (i, elem) {
		$(this).attr('data-aos', "fade-right"); $(this).attr('data-aos-anchor-placement', "top-bottom");
	});	
	$('.text-on-left .col.textwrap').each(function (i, elem) {
		$(this).attr('data-aos', "fade-left"); $(this).attr('data-aos-anchor-placement', "top-bottom");
	});	
	*/

	// AOS
	

	AOS.init({
		offset: 0,
		duration: 300,
		easing: 'ease-out-sine',
		 delay:0,
	});
	console.log("aos");
	AOS.refresh();
	console.log("aos");
	window.addEventListener('resize', AOS.refresh());
	window.addEventListener('load', AOS.refresh());


	//Back to top
	var offset = $(window).height() * 1.5;;
	var duration = 500;
	var toggleShow = false;
	$(window).scroll(function () {
		if ($(this).scrollTop() > 50) {	//	$('header').addClass("fixed");}else{	//	$('header').removeClass("fixed");}
			if ($(this).scrollTop() > offset) {/*setTimeout(function(){		if (readCookie('closed_modal') == null) {			$('.popup').fadeIn();			$('html').addClass('popup-open');		}	}, 5000);*/if (!toggleShow) {
				toggleShow = true; $('.mobile-toggle-wrap').stop().fadeIn(duration);
				$('.back-to-top').stop().fadeIn(duration);
				AOS.refresh();
			}
			} else {
				if (toggleShow) {
					toggleShow = false; $('.mobile-toggle-wrap').stop().fadeOut('150');
					$('.back-to-top').stop().fadeOut('150');
				}
			}
		}
	});
	$('.back-to-top').click(function (event) {
		event.preventDefault();
		$('html, body').animate({ scrollTop: 0 }, duration);
		return false;
	});
	$('.scroll_indicator').click(function (event) {
		event.preventDefault();
		var target = $("#main");
		//target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
		if (target.length) {
			console.log("smooth scroll " + target);
			$('html,body').animate({
				scrollTop: target.offset().top
			}, 1000);
			return false;
		}
		return false;
	});
	

		// smooth scrolling for anchors
	$('a[href*="#"]:not([href="#"])').click(function () {
		if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') && location.hostname == this.hostname) {
			var target = $(this.hash);
			target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
			if (target.length) {
				console.log("smooth scroll " + target);
				$('html,body').animate({
					scrollTop: target.offset().top
				}, 1000);
				return false;
			}
		}
	});
	//console.log(location.hash); 
	if (location.hash == '') {
		if(jQuery.urlParam('category') == null){
			
		   $("html, body").animate({ scrollTop: 0 }, 600);
	
		}
	}else {
		console.log($(location.hash).offset().top);
		var targetOffset = Math.floor($(location.hash).offset().top);
		//scroll			 
		$('html,body').animate({ scrollTop: targetOffset }, 1000, function () {
			jQuery(window).scroll();
		});
	}
	$('html,body').on("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove", function () { $('html,body').stop(); });


	
});

	jQuery(function($){
		var headerSection = $('header');   
		//headerSection.wrap('<div class="header-placeholder"></div>');
		var headerWrap = $('.header-space');
			
		var headerHeight = headerSection.outerHeight();
		headerWrap.css('height', headerHeight);  
		
		$(window).resize(function() {
			headerHeight = headerSection.outerHeight();
			headerWrap.css('height', headerHeight);
		});  
		
	});
	/*
	// show hide on scroll - fixed nav
	const body = document.body;
	const nav = document.querySelector("header");
	const scrollUp = "scroll-up";
	const scrollDown = "scroll-down";
	const scrollTrigger = '100';
	let lastScroll = 0;

	window.addEventListener("scroll", () => {
	const currentScroll = window.pageYOffset;
	if (currentScroll <= scrollTrigger) {
		body.classList.remove(scrollUp);
		return;
	}

	if (currentScroll > lastScroll && !body.classList.contains(scrollDown)) {
		// down
		body.classList.remove(scrollUp);
		body.classList.add(scrollDown);
		
	} else if (
		currentScroll < lastScroll &&
		body.classList.contains(scrollDown)
	) {
		// up
		body.classList.remove(scrollDown);
		body.classList.add(scrollUp);
	}
	lastScroll = currentScroll;
	});
*/

	
	/* MAIL ME */
	jQuery.fn.mailme = function () {
		var host = window.location.host;
		var at = / at /;
		var dot = / dot /g;
		this.each(function () {
			var addr = jQuery(this).text().replace(at, "@").replace(dot, ".");
			var title = encodeURI("Website enquiry - " + host);
			//alert(title);
			jQuery(this)
				.after('<a href="mailto:' + addr + '?subject=' + title + '"> ' + addr + '</a>')
				.remove();
		});
	};
	jQuery.urlParam = function(name){
		var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
		if (results==null) {
		   return null;
		}
		return decodeURI(results[1]) || 0;
	}
	